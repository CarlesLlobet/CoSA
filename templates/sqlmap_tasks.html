{% extends "skeleton.html" %}
{% block extra_head_tags %}
    <meta http-equiv="refresh" content="60">
{% endblock %}
{% load staticfiles %}

<link rel="shortcut icon" href="{% static 'favicon.ico' %}">

{% block content %}
    <br><br>
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                Les meves tasques d'SQLmap
            </div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-hover" id="dataTable-SQLmap">
                    <thead>
                    <tr>
                        {% if user.is_staff %}
                            <th>Usuari</th>
                        {% endif %}
                        <th>Nom</th>
                        <th>Estat</th>
                        <th>Target</th>
                        <th>Verbosity</th>
                        <th>Level</th>
                        <th>Risk</th>
                        <th>Depth</th>
                        <th>Charset</th>
                        <th>Data d'inserció</th>
                        <th>Correu</th>
                        <th>Periodica</th>
                    </tr>
                    </thead>
                    <tbody style="cursor: pointer;">
                    {% for t in tasks %}
                        {% if t.eina == 'SQLmap' %}
                            {% if t.estat == 'Finalitzada' %}
                                <tr class="success" onclick="window.location.href='{% url 'sqlmap_task' t.id %}'">
                                    {% if user.is_staff %}
                                        <td>{{ t.username }}</td>
                                    {% endif %}
                                    <td>{{ t.name }}</td>
                                    <td>{{ t.estat }}</td>
                                    <td>{{ t.target }}</td>
                                    <td>{{ t.verbosity }}</td>
                                    <td>{{ t.level }}</td>
                                    <td>{{ t.risk }}</td>
                                    <td>{{ t.depth }}</td>
                                    <td>{{ t.charset }}</td>
                                    <td>{{ t.insert_date|date:"m/d/Y H:i:s" }}</td>
                                    {% if t.mail %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                    {% if t.periodicity %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                </tr>
                            {% endif %}
                            {% if t.estat == 'Executant' %}
                                <tr class="info" onclick="window.location.href='{% url 'sqlmap_task' t.id %}'">
                                    {% if user.is_staff %}
                                        <td>{{ t.username }}</td>
                                    {% endif %}
                                    <td>{{ t.name }}</td>
                                    <td>{{ t.estat }}</td>
                                    <td>{{ t.target }}</td>
                                    <td>{{ t.verbosity }}</td>
                                    <td>{{ t.level }}</td>
                                    <td>{{ t.risk }}</td>
                                    <td>{{ t.depth }}</td>
                                    <td>{{ t.charset }}</td>
                                    <td>{{ t.insert_date|date:"m/d/Y H:i:s" }}</td>
                                    {% if t.mail %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                    {% if t.periodicity %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                </tr>
                            {% endif %}
                            {% if t.estat == 'Esperant' %}
                                <tr class="warning" onclick="window.location.href='{% url 'sqlmap_task' t.id %}'">
                                    {% if user.is_staff %}
                                        <td>{{ t.username }}</td>
                                    {% endif %}
                                    <td>{{ t.name }}</td>
                                    <td>{{ t.estat }}({{ t.pos }}º)</td>
                                    <td>{{ t.target }}</td>
                                    <td>{{ t.verbosity }}</td>
                                    <td>{{ t.level }}</td>
                                    <td>{{ t.risk }}</td>
                                    <td>{{ t.depth }}</td>
                                    <td>{{ t.charset }}</td>
                                    <td>{{ t.insert_date|date:"m/d/Y H:i:s" }}</td>
                                    {% if t.mail %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                    {% if t.periodicity %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                </tr>
                            {% endif %}
                            {% if t.estat == 'Bloquejada' %}
                                <tr class="danger" onclick="window.location.href='{% url 'sqlmap_task' t.id %}'">
                                    {% if user.is_staff %}
                                        <td>{{ t.username }}</td>
                                    {% endif %}
                                    <td>{{ t.name }}</td>
                                    <td>{{ t.estat }}</td>
                                    <td>{{ t.target }}</td>
                                    <td>{{ t.verbosity }}</td>
                                    <td>{{ t.level }}</td>
                                    <td>{{ t.risk }}</td>
                                    <td>{{ t.depth }}</td>
                                    <td>{{ t.charset }}</td>
                                    <td>{{ t.insert_date|date:"m/d/Y H:i:s" }}</td>
                                    {% if t.mail %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                    {% if t.periodicity %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                </tr>
                            {% endif %}
                            {% if t.estat == 'Planificada' %}
                                <tr class="warning" onclick="window.location.href='{% url 'sqlmap_task' t.id %}'">
                                    {% if user.is_staff %}
                                        <td>{{ t.username }}</td>
                                    {% endif %}
                                    <td>{{ t.name }}</td>
                                    <td>{{ t.estat }}</td>
                                    <td>{{ t.target }}</td>
                                    <td>{{ t.verbosity }}</td>
                                    <td>{{ t.level }}</td>
                                    <td>{{ t.risk }}</td>
                                    <td>{{ t.depth }}</td>
                                    <td>{{ t.charset }}</td>
                                    <td>{{ t.insert_date|date:"m/d/Y H:i:s" }}</td>
                                    {% if t.mail %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                    {% if t.periodicity %}
                                        <td><i class="fa fa-check fa-fw" style="color: green"></i></td>{% else %}
                                        <td><i class="fa fa-times fa-fw" style="color: red"></i></td>{% endif %}
                                </tr>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock content %}
